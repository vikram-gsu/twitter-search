(this["webpackJsonptwitter-api"]=this["webpackJsonptwitter-api"]||[]).push([[0],{35:function(e,n,a){},55:function(e,n,a){},58:function(e,n,a){"use strict";a.r(n);var t,r=a(0),c=a.n(r),o=a(25),s=a.n(o),l=(a(35),a(13)),i=a.n(l),d=a(26),u=a(8),h=a(2),b=a(3),g=a(27),j=a.n(g),O=(a(55),a(1)),p=b.a.button(t||(t=Object(h.a)(["\n  text-decoration: none;\n  border: none;\n  background: none;\n  cursor: pointer;\n  background-color: ",";\n  color: ",";\n  display: inline-block;\n  padding: 0.5em 1.2em;\n  margin: 0.4em;\n  border-radius: 20px;\n  text-align: center;\n  :hover {\n    color: var(--white);\n    background-color: var(--blue-200);\n  }\n"])),(function(e){return e.selected?"var(--blue-200)":"var(--blue-100)"}),(function(e){return e.selected?"var(--blue-100)":"var(--blue-200)"}));var f,x=function(e){var n=e.value,a=e.selected,t=e.onHashTagClick;return Object(O.jsxs)(p,{onClick:function(){return t(n)},selected:a,children:["#",n]})},m=c.a.createContext(null),v=function(){return Object(r.useContext)(m)},T=function(e){var n=e.value,a=e.children;return Object(O.jsx)(m.Provider,{value:n,children:a})},_=b.a.div(f||(f=Object(h.a)(["\n  grid-area: filter;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--white);\n  padding: 1em;\n  border-radius: var(--box-border-radius);\n  box-shadow: var(--box-shadow);\n  height: max-content;\n  p {\n    margin: 0;\n    font-size: 1.1em;\n    font-weight: bold;\n    color: var(--gray-300);\n    padding-bottom: 1em;\n    button {\n      border: none;\n      background: none;\n      padding: 0;\n      border-radius: 10px;\n      font-size: 0.75em;\n      color: var(--blue-200);\n      padding: 0 0.5em;\n      margin-left: 0.5em;\n      cursor: pointer;\n      :hover {\n        color: var(--blue-100);\n        background-color: var(--blue-200);\n      }\n      :disabled {\n        color: var(--gray-500);\n        background-color: white;\n        cursor: auto;\n      }\n    }\n  }\n  @media screen and (max-width: 467px) {\n    height: auto;\n    overflow: scroll;\n  }\n"])));var w,y=function(e){var n=e.allHashTags,a=void 0===n?[]:n,t=v(),r=t.selectedHashTags,c=t.clearHashTagSelection,o=t.onHashTagClick;return Object(O.jsxs)(_,{children:[Object(O.jsxs)("p",{children:["Filter by hashtag",Object(O.jsx)("button",{disabled:0===r.size,onClick:c,children:"Clear selection"})]}),Object(O.jsx)("div",{children:a.map((function(e){return Object(O.jsx)(x,{value:e,selected:r.has(e),onHashTagClick:o},e)}))})]})},E=b.a.div(w||(w=Object(h.a)(["\n    grid-area: header;\n    padding: 2em 0;\n    font-size: 1.5em;\n    font-weight: bold;\n    @media screen and (max-width: 467px){\n        padding: 1em;\n    }\n"])));var S,k,C,M,L,H,R=function(){return Object(O.jsx)(E,{children:"Tweet Feed"})},A=b.a.div(S||(S=Object(h.a)(["\n  display: flex;\n  background-color: ",";\n  padding: 1em;\n\n  :hover {\n    background-color: var(--gray-200);\n  }\n"])),(function(e){return e.seqNbr%2===0?"var(--white)":"var(--gray-100)"})),D=b.a.img(k||(k=Object(h.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n"]))),I=b.a.div(C||(C=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0 1em 1em 1em;\n"]))),N=b.a.div(M||(M=Object(h.a)(["\n  font-weight: bold;\n  padding: 0.5em 0;\n"]))),G=b.a.div(L||(L=Object(h.a)(["\n  padding: 0.5em 0;\n  a {\n    text-decoration: none;\n    color: var(--blue-200);\n    :hover {\n      cursor: pointer;\n    }\n  }\n"]))),P=b.a.div(H||(H=Object(h.a)([""])));function z(e){var n=e.result,a=e.seqNbr,t=v(),r=t.selectedHashTags,c=t.onHashTagClick,o=n.image_url,s=n.text,l=n.hash_tags,i=n.user_screen_name,d=n.tweet_url;return Object(O.jsxs)(A,{"data-testid":"Result row",seqNbr:a,children:[Object(O.jsx)(D,{src:o,alt:"Avatar image"}),Object(O.jsxs)(I,{children:[Object(O.jsxs)(N,{children:["@",i]}),Object(O.jsxs)(G,{children:[s,Object(O.jsx)("a",{href:d,children:d})]}),Object(O.jsx)(P,{children:l.map((function(e){return Object(O.jsx)(x,{value:e,selected:r.has(e),onHashTagClick:c},e)}))})]})]})}var F,q,U=c.a.memo(z),X=b.a.div(F||(F=Object(h.a)(["\n  grid-area: results;\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n"]))),B=b.a.div(q||(q=Object(h.a)(["\n  button {\n    border: none;\n    background: none;\n    color: var(--blue-200);\n    cursor: pointer;\n    padding: 1em;\n    :hover {\n      color: var(--gray-500);\n    }\n  }\n  padding: 2em 0 1em 0;\n  background-color: white;\n  display: flex;\n  justify-content: center;\n"])));function J(e){var n=e.loading,a=e.results,t=e.onLoadMoreClick;return Object(O.jsxs)(X,{children:[a.map((function(e,n){return Object(O.jsx)(U,{result:e,seqNbr:n},e.id)})),Object(O.jsx)(B,{children:n?Object(O.jsx)("span",{children:"Loading..."}):Object(O.jsx)("button",{onClick:t,children:"Load More"})})]})}var V,K=c.a.memo(J),Q=b.a.div(V||(V=Object(h.a)(["\n  grid-area: search;\n  input {\n    width: 100%;\n    height: 2em;\n    padding: 1.2em;\n    border: 1px solid var(--gray-200);\n    border-radius: var(--textbox-border-radius);\n    :hover {\n      outline: 1px solid var(--blue-200);\n    }\n    :focus {\n      outline: 2px solid var(--blue-200);\n    }\n  }\n  @media screen and (max-width: 467px){\n    margin: 0 1em;\n    height: 4em;\n  }\n"])));var W,Y=function(e){var n=e.searchValue,a=void 0===n?"":n,t=e.onSearchChange;return Object(O.jsx)(Q,{children:Object(O.jsx)("input",{type:"search",value:a,placeholder:"Search by keyword",onChange:t,autoFocus:!0})})},Z=a(6),$=a(5);!function(e){e.SET_SEARCH_TEXT="SET_SEARCH_TEXT",e.LOADING_RESULTS="LOADING_RESULTS",e.LOADING_COMPLETE="LOADING_COMPLETE",e.HAS_ERROR="HAS_ERROR",e.LOAD_MORE="LOAD_MORE"}(W||(W={}));var ee={currentSearchText:"",results:[],allHashTags:new Set,loading:!1,loadMore:0,hasError:!1};var ne=function(e,n){switch(n.type){case W.SET_SEARCH_TEXT:return Object($.a)(Object($.a)({},e),{},{currentSearchText:n.payload.currentSearchText,results:[],loadMore:0});case W.LOADING_RESULTS:return Object($.a)(Object($.a)({},e),{},{loading:!0});case W.HAS_ERROR:return Object($.a)(Object($.a)({},e),{},{hasError:!0,errorMessage:n.payload.message});case W.LOADING_COMPLETE:return n.payload.loadMore>0?Object($.a)(Object($.a)({},e),{},{loading:!1,hasError:!1,loadMore:n.payload.loadMore,results:[].concat(Object(Z.a)(e.results),Object(Z.a)(n.payload.results)),allHashTags:new Set([].concat(Object(Z.a)(Array.from(e.allHashTags)),Object(Z.a)(Array.from(n.payload.hashTags))))}):Object($.a)(Object($.a)({},e),{},{loading:!1,hasError:!1,loadMore:n.payload.loadMore,results:n.payload.results,allHashTags:n.payload.hashTags});case W.LOAD_MORE:return Object($.a)(Object($.a)({},e),{},{loadMore:n.payload.loadMore});default:return e}},ae=function(e){return Math.round((e.getTime()+60*e.getTimezoneOffset()*1e3)/1e3)};function te(e){return new Set(e.reduce((function(e,n){return[].concat(Object(Z.a)(e),Object(Z.a)(n.hash_tags))}),[]))}var re,ce,oe=function(e,n){var a=Object(r.useState)(e),t=Object(u.a)(a,2),c=t[0],o=t[1];return Object(r.useEffect)((function(){var a=setTimeout((function(){return o(e)}),n);return function(){return clearTimeout(a)}}),[e,n]),c},se=b.a.div(re||(re=Object(h.a)(['\n  display: grid;\n  grid-template-areas:\n    ". header  header ."\n    ". search  filter ."\n    ". results filter .";\n  grid-template-columns: 20vw 40vw 18vw 22vw;\n  grid-template-rows: 6em 4em 1fr;\n  grid-gap: 1em;\n  @media screen and (max-width: 467px) {\n    grid-template-areas:\n      "header"\n      "search"\n      "filter"\n      "results";\n    grid-template-columns: 1fr;\n    grid-template-rows: 4em 4em 12em 1fr;\n    grid-gap: 1em;\n  }\n']))),le=b.a.div(ce||(ce=Object(h.a)(["\n  grid-area: results;\n"])));var ie=function(){var e=Object(r.useReducer)(ne,ee),n=Object(u.a)(e,2),a=n[0],t=n[1],c=Object(r.useState)(new Set),o=Object(u.a)(c,2),s=o[0],l=o[1],h=a.currentSearchText,b=a.loading,g=a.loadMore,p=a.results,f=a.allHashTags,x=a.hasError,m=a.errorMessage,v=oe(h,1e3),_=Object(r.useCallback)(Object(d.a)(i.a.mark((function e(){var n,a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:W.LOADING_RESULTS}),e.prev=1,0===v.length){e.next=15;break}return n="".concat("https://twitter-api-backend-vikram.herokuapp.com","/").concat(v),a=null,g&&(a=p[p.length-1],n="".concat(n,"&max_id=").concat(a.id)),e.next=8,j.a.get(n);case 8:r=e.sent,s=r.data.statuses,c=s.map((function(e){return{created_at:new Date(e.created_at),id:e.id_str,text:-1===e.full_text.lastIndexOf("http")?e.full_text:e.full_text.slice(0,e.full_text.lastIndexOf("http")),hash_tags:e.entities.hashtags.map((function(e){return e.text})),user_screen_name:e.user.screen_name,image_url:e.user.profile_image_url,tweet_url:e.full_text.slice(e.full_text.lastIndexOf("http"),e.full_text.length)}})).sort((function(e,n){return ae(n.created_at)-ae(e.created_at)})),a&&(c=c.filter((function(e){return e.id!==a.id}))),o=te(c),t({type:W.LOADING_COMPLETE,payload:{loadMore:g,results:c,hashTags:o}}),e.next=16;break;case 15:t({type:W.LOADING_COMPLETE,payload:{loadMore:0,results:[],hashTags:new Set}});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),t({type:W.HAS_ERROR,payload:{message:e.t0}});case 21:case"end":return e.stop()}var s}),e,null,[[1,18]])}))),[g,v]);Object(r.useEffect)((function(){_()}),[g,_]);var w=Object(r.useMemo)((function(){return 0===s.size?p:p.filter((function(e){return e.hash_tags.filter((function(e){return s.has(e)})).length>0}))}),[p,s]);return Object(O.jsx)(T,{value:{selectedHashTags:s,clearHashTagSelection:function(){l(new Set)},onHashTagClick:function(e){var n=new Set(s);s.has(e)?n.delete(e):n.add(e),l(n)}},children:Object(O.jsxs)(se,{children:[Object(O.jsx)(R,{}),Object(O.jsx)(Y,{searchValue:h,onSearchChange:function(e){t({type:W.SET_SEARCH_TEXT,payload:{currentSearchText:e.target.value}})}}),b&&0===w.length&&Object(O.jsx)(le,{children:"Loading..."}),x&&Object(O.jsx)(le,{children:m}),w.length>0&&Object(O.jsx)(K,{results:w,onLoadMoreClick:function(){t({type:W.LOAD_MORE,payload:{loadMore:g+1}})},loading:b}),f.size>0&&Object(O.jsx)(y,{allHashTags:Array.from(f)})]})})},de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,59)).then((function(n){var a=n.getCLS,t=n.getFID,r=n.getFCP,c=n.getLCP,o=n.getTTFB;a(e),t(e),r(e),c(e),o(e)}))};s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(ie,{})}),document.getElementById("root")),de()}},[[58,1,2]]]);
//# sourceMappingURL=main.ba2b1c90.chunk.js.map